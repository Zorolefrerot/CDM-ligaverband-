<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MerdiVersa â€” Chat IA</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0c0f1f;
  --card:rgba(255,255,255,0.05);
  --accent1:#6b8eff;
  --accent2:#ff6b6b;
  --muted:rgba(255,255,255,0.65);
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:var(--bg);color:#eaf0ff;}
body{display:flex;flex-direction:column;}
header{display:flex;justify-content:space-between;align-items:center;padding:16px 32px;background:#0a0d1b;box-shadow:0 2px 10px rgba(0,0,0,0.4);}
.brand{display:flex;align-items:center;gap:12px;}
.logo{width:48px;height:48px;border-radius:12px;display:grid;place-items:center;font-weight:800;background:linear-gradient(135deg,var(--accent1),var(--accent2));box-shadow:0 10px 30px rgba(0,0,0,0.6);}
h1{font-size:22px;}
.nav{display:flex;gap:12px;}
.btn{padding:8px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:var(--muted);font-weight:600;cursor:pointer;text-decoration:none;}
.btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;color:white;}

.chat-container{flex:1;display:flex;flex-direction:column;padding:16px 32px;overflow:hidden;}
.messages{flex:1;overflow-y:auto;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.03);}
.msg{display:inline-block;max-width:70%;padding:12px 16px;border-radius:16px;margin-bottom:8px;font-size:15px;line-height:1.5;white-space:pre-wrap;}
.msg.user{background:linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.03));align-self:flex-end;}
.msg.ai{background:linear-gradient(90deg, rgba(107,142,255,0.14), rgba(255,107,107,0.08));color:#041124;align-self:flex-start;}

.composer{display:flex;gap:8px;margin-top:12px;}
.composer textarea{flex:1;min-height:60px;border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;resize:none;font-size:15px;}
.composer .send{min-width:120px;}

footer{text-align:center;padding:12px;color:var(--muted);font-size:13px;background:#0a0d1b;}

::-webkit-scrollbar{width:8px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:8px;}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">M</div>
    <div>
      <h1>MerdiVersa</h1>
      <div style="font-size:13px;color:var(--muted)">IA & Outils Multimodaux</div>
    </div>
  </div>
  <nav class="nav">
    <a href="index.html" class="btn">Accueil</a>
    <a href="image.html" class="btn">Images</a>
    <a href="music.html" class="btn">Musique</a>
  </nav>
</header>

<section class="chat-container">
  <div id="messages" class="messages">
    <div class="msg ai">Bonjour ðŸ‘‹ â€” je suis MerdiVersa, votre IA crÃ©Ã©e par Merdi Madimba. Posez-moi une question pour commencer.</div>
  </div>
  <div class="composer">
    <textarea id="input" placeholder="Ã‰crivez votre message ici..."></textarea>
    <button id="send" class="btn primary send">Envoyer</button>
  </div>
</section>

<footer>Â© 2025 MerdiVersa â€” CrÃ©Ã© par Merdi Madimba</footer>

<script>
const messagesEl = document.getElementById('messages');
const inputEl = document.getElementById('input');
const sendBtn = document.getElementById('send');

function appendMessage(text, who='ai'){
  const div = document.createElement('div');
  div.className = 'msg ' + (who==='user'?'user':'ai');
  div.textContent = text;
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return div;
}

function typeWriter(element, text, speed=20){
  return new Promise(resolve=>{
    element.textContent = '';
    let i=0;
    const interval = setInterval(()=>{
      if(i<text.length){
        element.textContent += text[i++];
        messagesEl.scrollTop = messagesEl.scrollHeight;
      } else {
        clearInterval(interval);
        resolve();
      }
    }, speed);
  });
}

// API Gemini Proxy
async function getAIResponse(prompt){
  try{
    // Remplace l'URL par ton proxy Gemini
    const res = await fetch(`https://merdiversa-proxy-gemini.onrender.com/gemini?prompt=${encodeURIComponent(prompt)}`);
    const data = await res.json();
    if(data?.message){
      return data.message;
    } else return "DÃ©solÃ©, impossible de rÃ©cupÃ©rer la rÃ©ponse.";
  } catch(err){
    console.error(err);
    return "Erreur rÃ©seau â€” veuillez rÃ©essayer.";
  }
}

sendBtn.addEventListener('click', async ()=>{
  const text = inputEl.value.trim();
  if(!text) return;
  appendMessage(text,'user');
  inputEl.value='';
  const aiBubble = appendMessage("...",'ai');
  const response = await getAIResponse(text);
  await typeWriter(aiBubble, response, 18);
});

inputEl.addEventListener('keydown', (e)=>{
  if(e.key==='Enter' && !e.shiftKey){
    e.preventDefault();
    sendBtn.click();
  }
});
</script>

</body>
</html>
