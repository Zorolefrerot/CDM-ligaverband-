<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Connexion - CDM Ligaverband</title><link rel="icon" type="image/png" href="https://i.ibb.co/KcYMxCrq/image.jpg"><style>body{font-family:"Segoe UI",Roboto,Arial,sans-serif;margin:0;padding:0;background:#f4f6fb;display:flex;justify-content:center;align-items:center;height:100vh}.card{background:#fff;border-radius:12px;padding:30px;max-width:400px;width:100%;text-align:center;box-shadow:0 6px 20px rgba(0,0,0,.1)}h1{color:#133f9a;margin-bottom:20px}input{width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;margin-bottom:15px;font-size:16px}button{width:100%;padding:12px;border:none;border-radius:8px;background:linear-gradient(180deg,#2b66d6,#133f9a);color:#fff;font-size:16px;font-weight:700;cursor:pointer}button:hover{opacity:.9}.message{margin-top:15px;font-size:15px;font-weight:700}.error{color:red}.success{color:green}</style><script src="https://unpkg.com/@supabase/supabase-js@2"></script><script>const SUPABASE_URL="https://ohuhgrjbciksfhjgewbo.supabase.co",SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9odWhncmpiY2lrc2Zoamdld2JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwODI2NjAsImV4cCI6MjA3MzY1ODY2MH0.Sg08ABEQI2V7xDtJQh0WqbwAf1xVOmcjjmZSTHrHtgY",supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);</script></head><body><div class="card"><h1>Connexion</h1><form id="login-form"><input id="code" type="text" placeholder="Entrez votre code à 14 chiffres" required maxlength="14"/><button type="submit">Se connecter</button></form><div id="message" class="message"></div></div><script>const form=document.getElementById("login-form"),message=document.getElementById("message");form.addEventListener("submit",async e=>{e.preventDefault(),message.textContent="";const o=document.getElementById("code").value.trim();if(!/^[0-9]{14}$/.test(o))return message.textContent="⚠️ Le code doit contenir exactement 14 chiffres.",void(message.className="message error");const{data:t,error:s}=await supabase.from("candido").select("*").eq("code",o).single();s||!t?(console.error(s),message.textContent="❌ Code invalide. Vérifiez et réessayez.",message.className="message error"):(message.textContent=`✅ Bienvenue ${t.prenom} ${t.nom}`,message.className="message success",localStorage.setItem("candido",JSON.stringify(t)),setTimeout(()=>{window.location.href="profil.html"},1200))});</script></body></html>
